@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================================================
   SMOOTHNESS & PERFORMANCE OPTIMIZATIONS
   Inspired by Monday.com and ClickUp for buttery-smooth interactions
   ============================================================================ */

/* GPU-accelerated base for all interactive elements */
@layer base {
    /* Enable GPU acceleration for common interactive elements */
    button,
    a,
    [role="button"],
    [draggable="true"],
    .interactive {
        -webkit-transform: translateZ(0);
        transform: translateZ(0);
        -webkit-backface-visibility: hidden;
        backface-visibility: hidden;
    }

    /* Smooth scrolling everywhere */
    * {
        scroll-behavior: smooth;
    }

    /* Reduce motion for users who prefer it */
    @media (prefers-reduced-motion: reduce) {
        *,
        *::before,
        *::after {
            animation-duration: 0.01ms !important;
            animation-iteration-count: 1 !important;
            transition-duration: 0.01ms !important;
        }
    }
}

@layer utilities {
    /* ========== GPU-ACCELERATED UTILITIES ========== */

    /* Force GPU acceleration */
    .gpu-accelerated {
        -webkit-transform: translateZ(0);
        transform: translateZ(0);
        -webkit-backface-visibility: hidden;
        backface-visibility: hidden;
        will-change: transform;
    }

    /* Smooth transform transitions (for drag, hover, etc.) */
    .smooth-transform {
        transition: transform 150ms cubic-bezier(0.25, 0.1, 0.25, 1),
                    box-shadow 150ms cubic-bezier(0.25, 0.1, 0.25, 1);
        -webkit-transform: translateZ(0);
        transform: translateZ(0);
    }

    /* Ultra-smooth for menus and popups */
    .smooth-popup {
        transition: opacity 120ms ease-out,
                    transform 120ms cubic-bezier(0.34, 1.56, 0.64, 1),
                    visibility 120ms;
        -webkit-transform: translateZ(0);
        transform: translateZ(0);
    }

    /* Smooth opacity transitions */
    .smooth-opacity {
        transition: opacity 150ms ease-out;
    }

    /* Smooth all properties (use sparingly) */
    .smooth-all {
        transition: all 150ms cubic-bezier(0.25, 0.1, 0.25, 1);
    }

    /* ========== DRAG & DROP OPTIMIZATIONS ========== */

    /* Dragging state - maximum smoothness */
    .dragging {
        -webkit-transform: translateZ(0);
        transform: translateZ(0);
        will-change: transform;
        transition: none !important;
        pointer-events: none;
        z-index: 9999;
    }

    /* Drag overlay styling */
    .drag-overlay {
        -webkit-transform: translateZ(0);
        transform: translateZ(0);
        will-change: transform;
        box-shadow: 0 20px 40px -10px rgba(0, 0, 0, 0.15),
                    0 8px 16px -8px rgba(0, 0, 0, 0.1);
        border-radius: 8px;
        background: white;
    }

    .dark .drag-overlay {
        box-shadow: 0 20px 40px -10px rgba(0, 0, 0, 0.4),
                    0 8px 16px -8px rgba(0, 0, 0, 0.3);
        background: #1f1f1f;
    }

    /* Drop target highlight */
    .drop-target {
        transition: background-color 100ms ease-out,
                    border-color 100ms ease-out;
    }

    .drop-target-active {
        background-color: rgba(59, 130, 246, 0.08);
        border-color: rgba(59, 130, 246, 0.3);
    }

    /* ========== BUTTON & CLICK INTERACTIONS ========== */

    /* Smooth click feedback */
    .click-scale {
        transition: transform 100ms cubic-bezier(0.25, 0.1, 0.25, 1);
        -webkit-transform: translateZ(0);
        transform: translateZ(0);
    }

    .click-scale:active {
        transform: scale(0.97);
    }

    /* Hover lift effect */
    .hover-lift {
        transition: transform 200ms cubic-bezier(0.25, 0.1, 0.25, 1),
                    box-shadow 200ms cubic-bezier(0.25, 0.1, 0.25, 1);
        -webkit-transform: translateZ(0);
        transform: translateZ(0);
    }

    .hover-lift:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px -8px rgba(0, 0, 0, 0.15);
    }

    /* ========== MENU & POPUP ANIMATIONS ========== */

    /* Menu enter animation */
    .menu-enter {
        animation: menuEnter 120ms cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
    }

    .menu-exit {
        animation: menuExit 80ms ease-in forwards;
    }

    /* Dropdown specific */
    .dropdown-enter {
        animation: dropdownEnter 150ms cubic-bezier(0.16, 1, 0.3, 1) forwards;
    }

    /* ========== ROW & CELL INTERACTIONS ========== */

    /* Table row hover */
    .row-hover {
        transition: background-color 80ms ease-out;
    }

    /* Cell edit focus */
    .cell-focus {
        transition: box-shadow 100ms ease-out,
                    border-color 100ms ease-out;
    }

    /* Status/Priority pill smooth */
    .pill-smooth {
        transition: transform 80ms ease-out,
                    background-color 100ms ease-out;
    }

    .pill-smooth:hover {
        transform: scale(1.02);
    }

    .pill-smooth:active {
        transform: scale(0.98);
    }

@layer utilities {
    .shadow-sm {
        box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.03);
    }

    .shadow {
        box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.05), 0 1px 2px -1px rgb(0 0 0 / 0.05);
    }

    .shadow-md {
        box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.05), 0 2px 4px -2px rgb(0 0 0 / 0.05);
    }

    .shadow-lg {
        box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.05), 0 4px 6px -4px rgb(0 0 0 / 0.05);
    }

    .shadow-xl {
        box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.05), 0 8px 10px -6px rgb(0 0 0 / 0.05);
    }

    .shadow-2xl {
        box-shadow: 0 25px 50px -12px rgb(0 0 0 / 0.1);
    }

    .shadow-clean {
        box-shadow: 0 0 40px -10px rgba(0, 0, 0, 0.08);
    }

    .dark .shadow-sm {
        box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.3);
    }

    .dark .shadow {
        box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.3), 0 1px 2px -1px rgb(0 0 0 / 0.3);
    }

    .dark .shadow-md {
        box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.3), 0 2px 4px -2px rgb(0 0 0 / 0.3);
    }

    .dark .shadow-lg {
        box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.3), 0 4px 6px -4px rgb(0 0 0 / 0.3);
    }

    .dark .shadow-xl {
        box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.3), 0 8px 10px -6px rgb(0 0 0 / 0.3);
    }

    .dark .shadow-2xl {
        box-shadow: 0 25px 50px -12px rgb(0 0 0 / 0.5);
    }

    .dark .shadow-clean {
        box-shadow: 0 0 40px -10px rgba(0, 0, 0, 0.5);
    }

    /* Hide scrollbar for Chrome, Safari and Opera */
    .no-scrollbar::-webkit-scrollbar {
        display: none;
    }

    /* Hide scrollbar for IE, Edge and Firefox */
    .no-scrollbar {
        -ms-overflow-style: none;
        /* IE and Edge */
        scrollbar-width: none;
        /* Firefox */
    }

    .font-datetime {
        font-family: 'Cairo', 'Noto Kufi Arabic', 'Inter', system-ui, sans-serif !important;
        font-weight: 500;
        font-feature-settings: 'tnum' on, 'lnum' on;
        font-variant-numeric: tabular-nums;
        letter-spacing: 0.01em;
    }

    [dir="rtl"] .font-datetime {
        font-weight: 600;
        letter-spacing: 0.02em;
    }
}

/* ========== MENU & POPUP KEYFRAMES ========== */

@keyframes menuEnter {
    from {
        opacity: 0;
        transform: scale(0.95) translateY(-4px);
    }
    to {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}

@keyframes menuExit {
    from {
        opacity: 1;
        transform: scale(1);
    }
    to {
        opacity: 0;
        transform: scale(0.95);
    }
}

@keyframes dropdownEnter {
    from {
        opacity: 0;
        transform: translateY(-8px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes scaleIn {
    from {
        opacity: 0;
        transform: scale(0.9);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

@keyframes slideUp {
    from {
        opacity: 0;
        transform: translateY(8px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes slideDown {
    from {
        opacity: 0;
        transform: translateY(-8px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Smooth scale animation */
.animate-scale-in {
    animation: scaleIn 150ms cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

.animate-slide-up {
    animation: slideUp 150ms cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

.animate-slide-down {
    animation: slideDown 150ms cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

/* Animation for person filter expanding from center */
@keyframes expandFromCenter {
    from {
        transform: scaleX(0);
        opacity: 0;
    }

    to {
        transform: scaleX(1);
        opacity: 1;
    }
}

/* Animated gradient for landing page hero text */
@keyframes gradient {
    0% {
        background-position: 0% 50%;
    }
    50% {
        background-position: 100% 50%;
    }
    100% {
        background-position: 0% 50%;
    }
}

.animate-gradient {
    animation: gradient 4s ease infinite;
}

/* Dashboard slide animations for fullscreen navigation */
@keyframes slideInFromRight {
    0% {
        transform: translateX(100%);
        opacity: 0;
    }
    100% {
        transform: translateX(0);
        opacity: 1;
    }
}

@keyframes slideInFromLeft {
    0% {
        transform: translateX(-100%);
        opacity: 0;
    }
    100% {
        transform: translateX(0);
        opacity: 1;
    }
}

/* Shimmer loading animation for KPI cards and charts */
@keyframes shimmer {
    0% {
        background-position: -200% 0;
    }
    100% {
        background-position: 200% 0;
    }
}

@keyframes pulse-subtle {
    0%, 100% {
        opacity: 0.6;
    }
    50% {
        opacity: 0.9;
    }
}

@keyframes fade-in-up {
    0% {
        opacity: 0;
        transform: translateY(10px);
    }
    100% {
        opacity: 1;
        transform: translateY(0);
    }
}

.shimmer {
    position: relative;
    overflow: hidden;
    background-color: #e4e4e7; /* zinc-200 */
}

.shimmer::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(
        90deg,
        transparent 0%,
        rgba(255, 255, 255, 0.6) 50%,
        transparent 100%
    );
    background-size: 200% 100%;
    animation: shimmer 0.8s ease-in-out infinite;
}

.dark .shimmer {
    background-color: #3f3f46; /* zinc-700 */
}

.dark .shimmer::after {
    background: linear-gradient(
        90deg,
        transparent 0%,
        rgba(255, 255, 255, 0.15) 50%,
        transparent 100%
    );
    background-size: 200% 100%;
}

@keyframes fade-in {
    0% {
        opacity: 0;
    }
    100% {
        opacity: 1;
    }
}

.animate-fade-in {
    animation: fade-in 0.3s ease-out forwards;
    opacity: 0;
}

.animate-fade-in-up {
    animation: fade-in-up 0.4s ease-out forwards;
}

/* Toast slide-in animation */
@keyframes slideIn {
    0% {
        transform: translateX(100%);
        opacity: 0;
    }
    100% {
        transform: translateX(0);
        opacity: 1;
    }
}

[dir="rtl"] @keyframes slideIn {
    0% {
        transform: translateX(-100%);
        opacity: 0;
    }
    100% {
        transform: translateX(0);
        opacity: 1;
    }
}

.animate-slideIn {
    animation: slideIn 0.3s ease-out forwards;
}

.animate-pulse-subtle {
    animation: pulse-subtle 2s ease-in-out infinite;
}

@keyframes border-rotate {
    from {
        transform: rotate(0deg);
    }
    to {
        transform: rotate(360deg);
    }
}

.animate-border-rotate {
    animation: border-rotate 4s linear infinite;
}

/* AI Brain Button - Smooth Wave Animations */
@keyframes ai-wave-flow {
    0% {
        transform: translateX(-100%) translateY(0);
    }
    50% {
        transform: translateX(0%) translateY(-5%);
    }
    100% {
        transform: translateX(100%) translateY(0);
    }
}

@keyframes ai-wave-flow-reverse {
    0% {
        transform: translateX(100%) translateY(0);
    }
    50% {
        transform: translateX(0%) translateY(5%);
    }
    100% {
        transform: translateX(-100%) translateY(0);
    }
}

@keyframes ai-wave-pulse {
    0%, 100% {
        opacity: 0.6;
        transform: scale(1);
    }
    50% {
        opacity: 0.9;
        transform: scale(1.02);
    }
}

@keyframes ai-glow-pulse {
    0%, 100% {
        box-shadow:
            0 0 15px rgba(59, 130, 246, 0.5),
            0 0 30px rgba(37, 99, 235, 0.3),
            inset 0 0 20px rgba(219, 234, 254, 0.15);
    }
    50% {
        box-shadow:
            0 0 25px rgba(96, 165, 250, 0.6),
            0 0 45px rgba(59, 130, 246, 0.4),
            inset 0 0 25px rgba(255, 255, 255, 0.2);
    }
}

@keyframes ai-shimmer {
    0% {
        background-position: -200% 0;
    }
    100% {
        background-position: 200% 0;
    }
}

@keyframes ai-gradient-rotate {
    0% {
        transform: rotate(0deg);
    }
    100% {
        transform: rotate(360deg);
    }
}

.ai-wave-button {
    position: relative;
    overflow: hidden;
    background:
        radial-gradient(circle at 30% 30%, #3b82f6 0%, transparent 50%),
        radial-gradient(circle at 70% 70%, #2563eb 0%, transparent 50%),
        radial-gradient(circle at 50% 50%, #1e40af 0%, #1e3a8a 100%);
    animation: ai-glow-pulse 3s ease-in-out infinite;
}

.ai-wave-button::before {
    content: '';
    position: absolute;
    inset: -50%;
    background: conic-gradient(
        from 0deg,
        transparent 0deg,
        rgba(147, 197, 253, 0.12) 30deg,
        rgba(191, 219, 254, 0.18) 60deg,
        rgba(255, 255, 255, 0.22) 90deg,
        rgba(191, 219, 254, 0.18) 120deg,
        rgba(147, 197, 253, 0.12) 150deg,
        transparent 180deg,
        transparent 360deg
    );
    animation: ai-gradient-rotate 8s linear infinite;
}

.ai-wave-button::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(
        135deg,
        transparent 0%,
        rgba(191, 219, 254, 0.12) 25%,
        rgba(255, 255, 255, 0.18) 50%,
        rgba(191, 219, 254, 0.12) 75%,
        transparent 100%
    );
    background-size: 200% 200%;
    animation: ai-shimmer 4s linear infinite;
}

.ai-wave-layer {
    position: absolute;
    width: 200%;
    height: 200%;
    left: -50%;
    top: -50%;
    pointer-events: none;
    z-index: 2;
    border-radius: 50%;
}

.ai-wave-1 {
    background:
        radial-gradient(ellipse 100% 50% at 50% 50%,
            rgba(255, 255, 255, 0.28) 0%,
            rgba(191, 219, 254, 0.18) 30%,
            rgba(147, 197, 253, 0.1) 50%,
            transparent 70%),
        linear-gradient(45deg,
            transparent 30%,
            rgba(219, 234, 254, 0.15) 50%,
            transparent 70%);
    animation: ai-wave-flow 4s ease-in-out infinite;
}

.ai-wave-2 {
    background:
        radial-gradient(ellipse 80% 60% at 50% 50%,
            rgba(255, 255, 255, 0.25) 0%,
            rgba(219, 234, 254, 0.15) 25%,
            rgba(191, 219, 254, 0.08) 45%,
            transparent 65%),
        linear-gradient(-45deg,
            transparent 35%,
            rgba(191, 219, 254, 0.12) 50%,
            transparent 65%);
    animation: ai-wave-flow-reverse 5s ease-in-out infinite;
    animation-delay: -1s;
}

.ai-wave-3 {
    background:
        radial-gradient(ellipse 90% 45% at 50% 50%,
            rgba(255, 255, 255, 0.22) 0%,
            rgba(219, 234, 254, 0.12) 35%,
            rgba(191, 219, 254, 0.06) 55%,
            transparent 75%),
        linear-gradient(90deg,
            transparent 20%,
            rgba(219, 234, 254, 0.1) 50%,
            transparent 80%);
    animation: ai-wave-flow 6s ease-in-out infinite;
    animation-delay: -2s;
}

.ai-wave-button-disabled {
    background: linear-gradient(135deg, #1a1a1a 0%, #252525 50%, #1a1a1a 100%);
    animation: none;
}

.ai-wave-button-disabled::before {
    opacity: 0.3;
}

@layer base {

    html {
        zoom: 1.05;
        /* Hide scrollbar globally while maintaining scroll */
        scrollbar-width: none; /* Firefox */
        -ms-overflow-style: none; /* IE/Edge */
    }

    html::-webkit-scrollbar {
        display: none; /* Chrome/Safari/Opera */
    }

    /* Disable zoom on mobile for proper responsive behavior */
    @media (max-width: 768px) {
        html {
            zoom: 1;
        }
    }
}

    /* Smooth theme transitions */
    body,
    main,
    nav,
    aside,
    header,
    footer,
    section,
    .transition-theme {
        @apply transition-colors duration-200;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
        @apply font-poppins font-medium;
    }
}

.recharts-wrapper {
    outline: none !important;
}

/* Chart Stability - Prevent flicker on visibility/focus change */
.chart-stability-active .recharts-wrapper,
.chart-stability-active .recharts-surface,
.chart-stability-active .recharts-responsive-container,
.chart-stability-active [class*="echarts"],
.chart-stability-active canvas,
.chart-stability-active svg {
    transition: none !important;
    animation: none !important;
    animation-duration: 0s !important;
}

/* Prevent chart resize flash */
.chart-stability-active .recharts-wrapper {
    will-change: auto !important;
}

/* Disable all recharts animations when in stability mode */
.chart-stability-active .recharts-bar-rectangle,
.chart-stability-active .recharts-line,
.chart-stability-active .recharts-area,
.chart-stability-active .recharts-pie-sector,
.chart-stability-active .recharts-cell {
    transition: none !important;
    animation: none !important;
}

/* Global recharts performance optimizations */
.recharts-responsive-container {
    contain: layout style;
}

.recharts-surface {
    contain: strict;
}

/* Mobile-specific utilities */
.safe-area-bottom {
    padding-bottom: env(safe-area-inset-bottom, 0px);
}

.safe-area-top {
    padding-top: env(safe-area-inset-top, 0px);
}

/* Touch-friendly tap highlight removal */
@media (max-width: 768px) {
    * {
        -webkit-tap-highlight-color: transparent;
    }

    input, textarea, select, button {
        font-size: 16px; /* Prevents iOS zoom on focus */
    }
}